scale_y_continuous(labels=percent)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = (..count..)/sum(..count..),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
library(Cairo)
category <- "category.png"
call <- "call.png"
final <- "final.png"
case <- "case.png"
census <- "census.png"
# Cairo package
# http://gforge.se/2013/02/exporting-nice-plots-in-r/
graphic <- "analyse/bar "
name <- paste(graphic, category)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, call)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
ggplot(data, aes(CALL.GROUPS)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CALL.GROUPS), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Call Groups" ,y = "Percent", fill="Call Groups") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, case)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
ggplot(data, aes(CASE.DESC)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CASE.DESC), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Case Description" ,y = "Percent", fill="Case Description") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, census)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
ggplot(data, aes(census_tract)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = census_tract), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
dev.off()
ggplot(data, aes(as.character(census_tract))) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = as.character(census_tract)), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
name <- paste(graphic, census)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
ggplot(data, aes(as.character(census_tract))) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = as.character(census_tract)), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, census)
Cairo(file=name,
type="png",
units="in",
width=5,
height=4,
pointsize=12,
dpi=144)
ggplot(data, aes(as.character(census_tract))) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = as.character(census_tract)), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, census)
Cairo(file=name,
type="png",
units="in",
width=5*20,
height=4*20,
pointsize=12*20,
dpi=144)
ggplot(data, aes(as.character(census_tract))) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = as.character(census_tract)), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, census)
Cairo(file=name,
type="png",
units="in",
width=5*10,
height=4*10,
pointsize=12*10,
dpi=144)
ggplot(data, aes(as.character(census_tract))) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = as.character(census_tract)), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*6,
height=4*6,
pointsize=12*6,
dpi=144)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*8,
height=4*6,
pointsize=12*6,
dpi=144)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*12,
height=4*6,
pointsize=12*6,
dpi=144)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*6,
height=4*12,
pointsize=12*6,
dpi=144)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*12,
height=4*12,
pointsize=12*6,
dpi=144)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*10,
height=4*10,
pointsize=12*6,
dpi=144)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, census)
Cairo(file=name,
type="png",
units="in",
width=5*14,
height=4*14,
pointsize=12*10,
dpi=144)
ggplot(data, aes(as.character(census_tract))) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = as.character(census_tract)), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
dev.off()
ggplot(data, aes(reorder(CATEGORY)), Category) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = reorder(CATEGORY)), Category), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
ggplot(data, aes(reorder(CATEGORY)), Category) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip()
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip(CATEGORY)
ct_980000_dt_2016 <- subset(data, census_tract == 980000 & strftime(occ_date, format = "%Y") == 2016)
d <- order(ct_980000_dt_2016$CATEGORY)
d <- ct_980000_dt_2016[,order(ct_980000_dt_2016$CATEGORY)]
?order
ct_980000_dt_2016[order(ct_980000_dt_2016$CATEGORY),]
View(ct_980000_dt_2016)
ct_980000_dt_2016 <- subset(data, census_tract == 980000 & strftime(occ_date, format = "%Y") == 2016)
str(data)
data$occ_date <- as.POSIXct(data$occ_date, format="%m/%d/%Y")
ct_980000_dt_2016 <- subset(data, census_tract == 980000 & strftime(occ_date, format = "%Y") == 2016)
d <- ct_980000_dt_2016[order(ct_980000_dt_2016$CATEGORY),]
View(d)
View(ct_980000_dt_2016)
d <- ct_980000_dt_2016[order(ct_980000_dt_2016$CALL.GROUPS),]
View(d)
d <- ct_980000_dt_2016[sort(ct_980000_dt_2016$CALL.GROUPS),]
View(d)
d <- ct_980000_dt_2016[ order(ct_980000_dt_2016$census_tract), ]
View(d)
d <- ct_980000_dt_2016[ order(ct_980000_dt_2016$CALL.GROUPS), ]
View(d)
library(dplyr)
arrange(ct_980000_dt_2016, CALL.GROUPS, CATEGORY)         # Use arrange from plyr package
ct_980000_dt_2016[ order(ct_980000_dt_2016$CALL.GROUPS, ct_980000_dt_2016$CATEGORY), ]  # Use built-in R functions
arrange(ct_980000_dt_2016, CALL.GROUPS, CATEGORY)         # Use arrange from plyr package
d <-ct_980000_dt_2016[ order(ct_980000_dt_2016$CALL.GROUPS, ct_980000_dt_2016$CATEGORY), ]  # Use built-in R functions
View(d)
arrange(ct_980000_dt_2016, CALL.GROUPS, CATEGORY)         # Use arrange from plyr package
d <- arrange(ct_980000_dt_2016, CALL.GROUPS, CATEGORY)         # Use arrange from plyr package
View(d)
d <- arrange(ct_980000_dt_2016, final_case_type, CATEGORY)         # Use arrange from plyr package
View(data)
data <- arrange(data, CALL.GROUPS, final_case_type)
View(data)
category <- "category.png"
call <- "call.png"
final <- "final.png"
case <- "case.png"
census <- "census.png"
# Cairo package
# http://gforge.se/2013/02/exporting-nice-plots-in-r/
graphic <- "analyse/bar "
name <- paste(graphic, category)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
# sorting by attribute
data <- arrange(data, CATEGORY, final_case_type)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip(CATEGORY)
dev.off()
name <- paste(graphic, call)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
# sorting by attribute
data <- arrange(data, CALL.GROUPS, final_case_type)
ggplot(data, aes(CALL.GROUPS)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CALL.GROUPS), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Call Groups" ,y = "Percent", fill="Call Groups") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, final)
Cairo(file=name,
type="png",
units="in",
width=5*10,
height=4*10,
pointsize=12*6,
dpi=144)
# sorting by attribute
data <- arrange(data, final_case_type, CATEGORY)
ggplot(data, aes(final_case_type)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = final_case_type), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Final Case" ,y = "Percent", fill="Final Case") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, census)
Cairo(file=name,
type="png",
units="in",
width=5*14,
height=4*14,
pointsize=12*10,
dpi=144)
# sorting by attribute
data <- arrange(data, census_tract, final_case_type)
ggplot(data, aes(as.character(census_tract))) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = as.character(census_tract)), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Census Tract" ,y = "Percent", fill="Census Tract") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, category)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
# sorting by attribute
data <- arrange(data, CATEGORY, final_case_type)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip(CATEGORY)
dev.off()
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
data <- arrange(data, CALL.GROUPS, final_case_type)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
name <- paste(graphic, call)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
# sorting by attribute
data <- arrange(data, CALL.GROUPS, final_case_type)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent)
dev.off()
name <- paste(graphic, category)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
# sorting by attribute
data <- arrange(data, CATEGORY, final_case_type)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip(CATEGORY)
dev.off()
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip(CATEGORY)
data <- arrange(data, CATEGORY, final_case_type)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip(CATEGORY)
data <- read.csv(file = "data/data.csv", header = T, sep = ";", stringsAsFactors = F)
# removing na's
data <- na.omit(data)
name <- paste(graphic, category)
Cairo(file=name,
type="png",
units="in",
width=5*2,
height=4*2,
pointsize=12*2,
dpi=144)
# sorting by attribute
data <- arrange(data, CATEGORY, final_case_type)
ggplot(data, aes(CATEGORY)) +
geom_bar(aes(y = (..count..)/sum(..count..), fill = CATEGORY), stat="count") +
geom_text(aes( label = scales::percent((..count..)/sum(..count..)),
y= (..count..)/sum(..count..) ), stat= "count", vjust = -.5) +
labs(x = "Category" ,y = "Percent", fill="Category") +
scale_y_continuous(labels=percent) +
+ coord_flip(CATEGORY)
dev.off()
